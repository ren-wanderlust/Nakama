# 📱 App Store 申請チェックリスト

**アプリ名:** Nakama  
**バージョン:** 1.0.0  
**最終更新:** 2025-12-11

このドキュメントは、App Store申請前に確認すべき項目をまとめたものです。

---

## ✅ **完了している項目**

### **1. 基本機能**
- ✅ ユーザー登録・ログイン（Supabase認証）
- ✅ プロフィール作成・編集
- ✅ マッチング機能（いいね・マッチング）
- ✅ チャット機能（個人・グループ）
- ✅ プロジェクト機能（作成・応募・承認）
- ✅ プッシュ通知
- ✅ オンボーディング

### **2. セキュリティ・プライバシー**
- ✅ ブロック機能実装済み
- ✅ 通報機能実装済み
- ✅ アカウント削除機能実装済み
- ✅ Row Level Security (RLS) 設定済み
- ✅ プライバシーポリシー実装済み
- ✅ 利用規約実装済み

### **3. app.json設定**
- ✅ bundleIdentifier設定済み (`com.nakama.app`)
- ✅ アプリ名設定済み (`Nakama`)
- ✅ バージョン設定済み (`1.0.0`)
- ✅ アイコン設定済み
- ✅ スプラッシュスクリーン設定済み
- ✅ 権限の説明文設定済み（カメラ、写真、マイク）
- ✅ プッシュ通知の設定済み

### **4. デザイン**
- ✅ モダンで洗練されたUI
- ✅ ブランドカラー統一（#009688）
- ✅ カスタムアニメーション
- ✅ レスポンシブデザイン

---

## ⚠️ **App Store申請前に必須の対応**

### **🔴 優先度：最高（申請前に必須）**

#### **1. プライバシー関連の完全性**

**現状:**
- プライバシーポリシーと利用規約は実装済み
- ただし、App Store Connectでデータの取り扱いを申告する必要がある

**必要な対応:**
```
App Store Connect で以下を申告:
□ 収集するデータの種類
  - 連絡先情報（メールアドレス）
  - 識別子（ユーザーID）
  - ユーザーコンテンツ（プロフィール、メッセージ、写真）
  - 使用状況データ（アプリの利用状況）

□ データの使用目的
  - アプリ機能の提供
  - 分析
  - プロダクトのパーソナライゼーション

□ データのトラッキング
  - トラッキングしていない場合は「No」を選択
```

---

#### **2. アプリのメタデータ（App Store Connect）**

**必須項目:**

```markdown
□ アプリ名: Nakama
□ サブタイトル: 東大早慶MARCHの学生向けプロジェクトマッチング
□ プロモーションテキスト: 
  「志の高い仲間と出会い、プロジェクトを一緒に創る」

□ 説明文:
  Nakamaは、東大・早慶・MARCHを中心とした学生向けの
  プロジェクトマッチングアプリです。
  
  【主な機能】
  ・プロフィール作成で自分をアピール
  ・プロジェクト募集・応募機能
  ・マッチング機能で気の合う仲間を見つける
  ・チャット機能でコミュニケーション
  ・チームチャットでプロジェクトを推進
  
  【こんな人におすすめ】
  ・起業志向の学生
  ・プロジェクトメンバーを探している
  ・スキルを活かしたい
  ・新しいチャレンジをしたい

□ キーワード:
  プロジェクト,マッチング,学生,起業,チーム,コラボ,ビジネス,MARCH,早慶,東大

□ サポートURL: （Webサイトまたはサポートページ）
□ マーケティングURL: （オプション）

□ カテゴリ:
  - プライマリ: ソーシャルネットワーキング
  - セカンダリ: ビジネス

□ 年齢制限: 12+ （ユーザー生成コンテンツがあるため）
```

---

#### **3. スクリーンショット**

**必須:**
- iPhone 6.7インチディスプレイ用（必須）: 1290 x 2796 px
- iPhone 5.5インチディスプレイ用: 1242 x 2208 px

**推奨枚数:** 3-5枚

**推奨内容:**
```
1. オンボーディング画面（アプリの特徴）
2. プロフィール画面
3. プロジェクト一覧画面
4. マッチング画面
5. チャット画面
```

**作成方法:**
```bash
# Expoでスクリーンショットを取得
# iOSシミュレータで実行中に Cmd+S でスクリーンショット

# または、実機で撮影してから以下でリサイズ:
# https://www.appscreenshots.com/resize
```

---

#### **4. アプリアイコン**

**確認事項:**
```
□ 1024x1024 px (App Store用)
□ 透明な背景なし
□ 角丸なし（Appleが自動で追加）
□ アプリ名のテキストなし
□ 高解像度で鮮明
```

**現在の状態:**
- `./assets/icon.png` は設定済み
- App Store Connect用の1024x1024pxも準備が必要

---

### **🟡 優先度：高（できれば対応）**

#### **5. テストユーザーアカウント**

App Store審査員がアプリをテストできるように、テストアカウントを提供する必要があります。

**準備:**
```
□ テストユーザーアカウントを作成
  - メールアドレス: test@example.com
  - パスワード: （安全なパスワード）

□ App Store Connect の「App 審査情報」に記載
  - ユーザー名
  - パスワード
  - デモデータの説明
```

---

#### **6. バックエンド・データベースの準備**

**確認事項:**
```
□ Supabaseの本番環境が稼働中
□ データベースのバックアップ設定
□ RLS が正しく設定されている
□ 匿名ユーザーのアクセス制限
□ APIレート制限の設定（Supabase プロジェクト設定）
```

---

#### **7. エラーハンドリングの改善**

**現状:**
- `utils/errorHandling.ts` は作成済みだが、一部で未使用

**推奨:**
主要なAPI呼び出しでエラーハンドリングを統合：
```typescript
import { fetchWithRetry, handleError } from '../utils/errorHandling';

try {
  const { data, error } = await fetchWithRetry(
    () => supabase.from('profiles').select('*'),
    3
  );
  if (error) throw error;
} catch (error) {
  handleError(error, {
    title: 'エラー',
    retry: () => fetchProfiles(),
  });
}
```

---

#### **8. パフォーマンスの最適化**

**推奨:**
```
□ ポーリング間隔を3秒 → 30秒に延長（バッテリー節約）
□ expo-image を使用して画像キャッシング
□ ローディング状態の改善（スケルトン）
```

**参考:** `QUALITY_IMPROVEMENTS.md` を参照

---

### **🟢 優先度：中（余裕があれば）**

#### **9. アナリティクス導入**

**推奨:**
```bash
npx expo install @react-native-firebase/app @react-native-firebase/analytics
```

**トラッキング項目:**
- スクリーン遷移
- マッチング率
- プロジェクト作成数
- チャット活性度

---

#### **10. オフライン対応**

```bash
npm install @react-native-community/netinfo
```

ネットワーク状態を監視し、オフライン時のUI表示

---

#### **11. アクセシビリティ**

```typescript
<TouchableOpacity
  accessibilityLabel="プロフィールを表示"
  accessibilityHint="タップしてプロフィール詳細を開きます"
  accessibilityRole="button"
>
  <Text>プロフィール</Text>
</TouchableOpacity>
```

---

## 📋 **App Store 審査のガイドライン準拠**

### **確認事項:**

#### **1. App Store Review Guidelines 準拠**
```
□ 2.1 アプリの完成度
  - クラッシュやバグがない
  - リンクが機能している
  - プレースホルダーコンテンツがない

□ 2.3 正確なメタデータ
  - スクリーンショットが実際のアプリと一致
  - 説明文が正確

□ 4.0 デザイン
  - iOS Human Interface Guidelinesに準拠
  - 適切なナビゲーション

□ 5.1 プライバシー
  - プライバシーポリシーあり ✅
  - データの取り扱いを明記

□ 5.2 知的財産
  - 第三者のコンテンツを適切に使用
  - 著作権侵害なし
```

---

## 🚀 **申請の流れ**

### **Step 1: ビルド作成**
```bash
# EAS Buildでビルド
npx eas build --platform ios --profile production
```

### **Step 2: App Store Connectでアプリ情報入力**
1. https://appstoreconnect.apple.com にログイン
2. 「マイApp」→「+」→「新規App」
3. アプリ情報を入力（上記メタデータ参照）
4. スクリーンショットをアップロード
5. ビルドをアップロード

### **Step 3: 審査提出**
1. 「審査に提出」をクリック
2. 輸出コンプライアンスの質問に回答
3. 広告識別子（IDFA）の質問に回答
4. 提出

### **Step 4: 審査待ち**
- 通常1-3日で審査結果が通知されます
- リジェクトされた場合は、理由を確認して修正

---

## ⏱️ **タイムライン（推奨）**

### **今日（12/11）**
- ✅ アプリアイコンの最終確認
- ✅ スクリーンショットの撮影・作成
- ✅ App Store Connectでアプリ情報を入力

### **明日（12/12）**
- ✅ テストユーザーアカウント作成
- ✅ プライバシー関連の申告準備
- ✅ 最終的なバグチェック

### **12/13**
- ✅ EAS Buildでビルド作成
- ✅ TestFlightでテスト配信
- ✅ 最終確認

### **12/14**
- ✅ App Store 審査提出

---

## 📝 **重要な注意事項**

### **1. Apple Developer Program**
```
□ Apple Developer Programに登録済み（年間¥12,980）
□ 支払い方法が設定されている
```

### **2. 税金・銀行情報**
```
□ App Store Connect で税金情報を入力
□ 銀行情報を入力（収益を受け取る場合）
```

### **3. リジェクト対策**

**よくあるリジェクト理由:**
1. **プライバシーポリシーの不備**
   → プライバシーポリシーURLが機能していることを確認 ✅

2. **メタデータの不一致**
   → スクリーンショットとアプリが一致していることを確認

3. **クラッシュ・バグ**
   → 徹底的にテスト

4. **ユーザー生成コンテンツの管理**
   → 通報・ブロック機能あり ✅

5. **ログインの壁**
   → テストアカウントを提供

---

## 🎯 **最優先タスク（今日中）**

1. **スクリーンショット作成** (2時間)
   - iOSシミュレータで5枚撮影
   - 1290 x 2796 px にリサイズ

2. **App Store Connect でアプリ情報入力** (1時間)
   - 説明文、キーワード、カテゴリ
   - プライバシーデータの申告

3. **テストアカウント作成** (30分)
   - Supabaseで新規ユーザー作成
   - デモデータの準備

4. **最終バグチェック** (1時間)
   - すべての画面を確認
   - エラーが出ないか確認

---

## ✅ **まとめ**

### **完了している主要項目:**
- ✅ アプリの基本機能
- ✅ セキュリティ対策
- ✅ プライバシーポリシー・利用規約
- ✅ アプリ設定（app.json）

### **申請前に必須の対応:**
1. 📸 **スクリーンショット作成**
2. 📝 **App Store Connect でメタデータ入力**
3. 👤 **テストアカウント準備**
4. 🔐 **プライバシーデータの申告**

### **推奨される改善:**
1. ⚡ パフォーマンス最適化
2. 🛡️ エラーハンドリング統合
3. 📊 アナリティクス導入

---

## 💡 **サポートリソース**

- **Apple Developer:** https://developer.apple.com
- **App Store Review Guidelines:** https://developer.apple.com/app-store/review/guidelines/
- **Human Interface Guidelines:** https://developer.apple.com/design/human-interface-guidelines/
- **App Store Connect:** https://appstoreconnect.apple.com

---

**現在のアプリは非常に高品質で、基本的な要件は満たしています！**

上記の必須項目を対応すれば、**すぐにでも申請可能**です！🚀

どの項目から始めますか？
